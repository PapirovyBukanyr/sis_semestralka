# SIS Semestralka Documentation

 Author: Marek PÅ™ibyl
 This document was autogenerated by tools/gen_docs.py.

# receiver


## module1


### receiver/module1/data_processor.c


| Module | Functions |
|---|---|
| module1 | *preproc_thread, convert_data, convert_json_to_datapoint, parse_data, process_input |

#### *preproc_thread


```text
Preprocessing thread for the pipeline.

Reads raw lines from `raw_queue`, attempts to parse them into
`data_point_t` and forwards either a CSV-formatted string expected by the
NN thread or the original raw line to `proc_queue`.

@param arg unused thread argument
@return NULL
```

#### convert_data


```text
Convert parsed data into the target representation.

Placeholder used by the example parsing pipeline.

@param parsed_data parsed input string
```

#### convert_json_to_datapoint


```text
Convert a JSON-like string to a data_point_t using the parser helpers.

Returns 1 when at least one numeric field was present, 0 otherwise.

@param s input JSON-like string
@param d output datapoint
@return 1 on success (some numeric data found), 0 otherwise
```

#### parse_data


```text
Parse a raw input string.

This example function demonstrates how raw input could be parsed. It
currently forwards the parsed content to `convert_data` for conversion.

@param raw_data input string (NUL-terminated)
```

#### process_input


```text
Process an input file line-by-line.

Example utility that reads `input_file` and calls `parse_data` for each
line. This helper is used during local testing and is not required for the
network receiver pipeline.

@param input_file path to an input text file
```

### receiver/module1/data_processor.h


| Module | Functions |
|---|---|
| module1 |  |

### receiver/module1/parser.c


| Module | Functions |
|---|---|
| module1 | find_json_number, parse_json_to_datapoint |

#### find_json_number


```text
Locate a numeric value after a JSON key name.

Searches for `key` in `s`, finds the following ':' and attempts to parse
a floating-point number. This helper is intentionally permissive and used
for lightweight JSON-like extraction in the receiver pipeline.

@param s input string to search
@param key key name to find (e.g. "\"timestamp\"")
@param out pointer receiving the parsed double when found
@return 1 if a numeric value was found and parsed, 0 otherwise
```

#### parse_json_to_datapoint


```text
Parse a lightweight JSON-like string into a data_point_t.

Fields that cannot be found are left as NaN so callers can detect missing
values. Supported keys: timestamp, export_bytes, export_flows,
export_packets, export_rtr, export_rtt, export_srt. Matching accepts keys
with or without surrounding quotes.

@param s input NUL-terminated string containing JSON-like content
@param d output pointer to data_point_t (will be written with parsed values or NaN)
```

### receiver/module1/parser.h


| Module | Functions |
|---|---|
| module1 |  |

## module2


### receiver/module2/h_layer.c


| Module | Functions |
|---|---|
| module2 |  |

### receiver/module2/h_layer.h


| Module | Functions |
|---|---|
| module2 |  |

### receiver/module2/neuron.c


| Module | Functions |
|---|---|
| module2 |  |

### receiver/module2/neuron.h


| Module | Functions |
|---|---|
| module2 |  |

### receiver/module2/nn.c


| Module | Functions |
|---|---|
| module2 |  |

### receiver/module2/nn.h


| Module | Functions |
|---|---|
| module2 |  |

### receiver/module2/nn_impl.c


| Module | Functions |
|---|---|
| module2 | nn_create, nn_forward, nn_free, nn_load_weights, nn_predict_and_maybe_train, nn_save_weights, skip_layer |

#### nn_create


```text
Create and initialize a new neural network instance.

The function allocates the nn_t structure, creates hidden and output
layers according to provided parameters and attempts to load saved
weights from disk. On failure it returns NULL.

@param p_in pointer to nn_params_t with desired configuration
@return pointer to allocated nn_t or NULL on error
```

#### nn_forward


```text
Internal forward pass producing normalized outputs.

This static helper computes the network's output values given normalized
inputs and writes them into `out_norm` (length OUTPUT_SIZE).

@param nn network instance
@param input_norm normalized input vector length INPUT_SIZE
@param out_norm preallocated output array length OUTPUT_SIZE
```

#### nn_free


```text
Free a neural network instance and persist weights.

Attempts to save weights to disk (best-effort) and frees all allocated
substructures owned by `nn`.

@param nn pointer previously returned by nn_create
```

#### nn_load_weights


```text
Load network weights from a binary file into `nn` if compatible.

The loader accepts files containing a prefix of hidden layers matching the
in-memory network and an optional output layer. Mismatches are reported
and loading fails gracefully.

@param nn network instance to load into
@param filename path of the weight file to read
@return 0 on success (at least some layers loaded), -1 on error
```

#### nn_predict_and_maybe_train


```text
Predict (and optionally train) the neural network for a datapoint.

The function accepts raw `data_point_t` input, normalizes it, runs a
forward pass and, if `target_raw` is non-NULL, performs an online
training update using `target_raw` as the desired raw outputs. After the
operation the predicted (denormalized) outputs are written into `out_raw`.

@param nn network instance
@param in pointer to input datapoint (raw values)
@param target_raw optional pointer to target raw outputs (length OUTPUT_SIZE) or NULL
@param out_raw output buffer (length OUTPUT_SIZE) receiving denormalized prediction
@return Euclidean cost after training if training occurred, otherwise NaN
```

#### nn_save_weights


```text
Save network weights to a binary file.

The function attempts to create a parent directory (if present in the
filename) and writes a simple representation of the network (layer sizes
followed by per-neuron weight/bias arrays).

@param nn network instance
@param filename path to write the weight file
@return 0 on success, -1 on error
```

#### skip_layer


```text
Skip a serialized h_layer entry in a file.

Used when the on-disk model contains more layers than the in-memory
network: this helper advances the file pointer over one layer's data.

@param fp open FILE* positioned at the start of an h_layer entry
@return 0 on success, -1 on error
```

### receiver/module2/nn_impl.h


| Module | Functions |
|---|---|
| module2 |  |

### receiver/module2/nn_params.c


| Module | Functions |
|---|---|
| module2 | default_nn_params |

#### default_nn_params


```text
Return a set of default neural network parameters.

The returned structure contains sensible defaults for hidden layer count,
learning rate and feature scales derived from the dataset. Scales map raw
values to the network's normalized domain by dividing raw values by the
corresponding scale factor.

@return initialized nn_params_t structure
```

### receiver/module2/nn_params.h


| Module | Functions |
|---|---|
| module2 |  |

### receiver/module2/nn_thread.c


| Module | Functions |
|---|---|
| module2 | while |

#### while


```text
Main neural-network processing thread.

This thread consumes CSV-formatted lines from `proc_queue`, parses them
into `data_point_t`, runs the neural network to predict and optionally
trains the network online using the previous datapoint as input and the
current raw values as target. Predictions and debug strings are pushed
to `repr_queue`.
```

### receiver/module2/util.c


| Module | Functions |
|---|---|
| module2 | "util.h", denormalize_output, normalize_input |

#### "util.h"


```text
util.c

Normalize input features to [-1, 1] range using precomputed scales and from [-1, 1] back to raw values.
```

#### denormalize_output


```text
Denormalize neural network output from [-1, 1] range back to raw values using precomputed scales.

@param nn_params_t* params: pointer to nn_params_t containing scales
@param double* nn_out: pointer to neural network output array (length OUTPUT_SIZE)
@param float* out_raw: pointer to output array (length OUTPUT_SIZE) for denormalized raw values
```

#### normalize_input


```text
Normalize input features to [-1, 1] range using precomputed scales.

@param nn_params_t* params: pointer to nn_params_t containing scales
@param data_point_t* in: pointer to input data point (raw values)
@param double* out_norm: pointer to output array (length INPUT_SIZE) for normalized values
```

### receiver/module2/util.h


| Module | Functions |
|---|---|
| module2 |  |

## module3


### receiver/module3/represent.c


| Module | Functions |
|---|---|
| module3 | represent_thread |

#### represent_thread


```text
Representation thread.

Reads formatted strings from `repr_queue` and writes them to the log for
human-readable representation. Returns when the queue is closed.

@param arg unused thread argument
@return NULL
```

### receiver/module3/represent.h


| Module | Functions |
|---|---|
| module3 |  |

## module4


### receiver/module4/ui.c


| Module | Functions |
|---|---|
| module4 | ui_thread |

#### ui_thread


```text
UI thread function.

Consumes messages from the `error_queue` and logs them using the project's
logging facility. The function returns when the queue is closed.

@param arg unused thread argument
@return NULL
```

### receiver/module4/ui.h


| Module | Functions |
|---|---|
| module4 |  |

## core


### receiver/common.c


| Module | Functions |
|---|---|
| core | queue_close, queue_init, queue_pop, queue_push |

#### queue_close


```text
Close the queue and wake any waiting consumers.

After calling this, `queue_pop` will return NULL once the queue is empty.

@param q queue to close
```

#### queue_init


```text
Initialize a string queue.

Sets head/tail to NULL, initializes the mutex and condition variable and
clears the closed flag.

@param q pointer to the queue to initialize
```

#### queue_pop


```text
Pop a string from the queue.

This function blocks until an item is available or the queue is closed.
The returned pointer is owned by the caller and must be freed by the
caller when no longer needed. Returns NULL when the queue is closed and
empty.

@param q source queue
@return allocated string pointer or NULL
```

#### queue_push


```text
Push a copy of the string onto the queue.

The string is duplicated with strdup and owned by the queue; callers must
not free the provided pointer after calling this function.

@param q target queue
@param s NUL-terminated C string to push
```

### receiver/common.h


| Module | Functions |
|---|---|
| core |  |

### receiver/io.c


| Module | Functions |
|---|---|
| core |  |

### receiver/io.h


| Module | Functions |
|---|---|
| core |  |

### receiver/log.c


| Module | Functions |
|---|---|
| core | log_close, log_fprintf, log_init |

#### log_close


```text
Release logging subsystem resources.

Cleans up the platform-specific synchronization primitives.
```

#### log_fprintf


```text
Thread-safe fprintf wrapper used by the project for serialized logging.

This function acquires the internal log lock, performs a vfprintf to the
provided FILE* and flushes the stream. If `f` is NULL the call is a no-op.

@param f FILE pointer to write to (e.g., stdout/stderr or a log file)
@param fmt printf-style format string
@param ... format arguments
```

#### log_init


```text
Initialize logging subsystem resources.

On Windows this initializes a CRITICAL_SECTION. On POSIX this initializes
a pthread mutex. This function must be called before other logging APIs.
```

### receiver/log.h


| Module | Functions |
|---|---|
| core |  |

### receiver/main.c


| Module | Functions |
|---|---|
| core | <stdio.h>, main |

#### <stdio.h>


```text
main.c

Entrypoint for the receiver/analyzer program. This binary starts the
receive-and-process pipeline by calling the higher-level run_receiver()
implementation (see `common.c` / `io.c`).
```

#### main


```text
Program entrypoint.

This function forwards to run_receiver() which performs socket creation,
thread startup and the main receive loop.

@param argc count of command-line arguments (unused)
@param argv array of command-line arguments (unused)
@return return code from run_receiver()
```

### receiver/platform.c


| Module | Functions |
|---|---|
| core | platform_socket_cleanup, platform_socket_init |

#### platform_socket_cleanup


```text
Clean up platform-specific socket subsystem.

On Windows this calls WSACleanup(). On POSIX systems this is a no-op.
```

#### platform_socket_init


```text
Initialize platform-specific socket subsystem.

On Windows this initializes Winsock (WSAStartup). On POSIX systems this is a
no-op and returns success.

@return 0 on success, non-zero on failure
```

### receiver/platform.h


| Module | Functions |
|---|---|
| core |  |

### receiver/queues.c


| Module | Functions |
|---|---|
| core |  |

### receiver/queues.h


| Module | Functions |
|---|---|
| core |  |

### receiver/types.h


| Module | Functions |
|---|---|
| core |  |

# sender


## core


### sender/net_logger.c


| Module | Functions |
|---|---|
| core | <stdio.h>, cmpstr, free_files, main |

#### <stdio.h>


```text
net_logger.c

Simple CSV/JSON sender used for testing the receiver pipeline. It reads
rows from CSV files (or a JSONL file) and sends them via UDP to a configured
server. Timing between rows can be accelerated for replay.
```

#### cmpstr


```text
Comparator for qsort that compares two filename pointers lexicographically.

Expects `a` and `b` to be pointers to `char*` and returns the same
semantics as strcmp so it can be passed directly to qsort.

@param a pointer to the first element (char**)
@param b pointer to the second element (char**)
@return negative, zero or positive value like strcmp
```

#### free_files


```text
Free an array of heap-allocated filename strings and the array itself.

If `files` is NULL this is a no-op. Otherwise each entry is freed and the
array container is freed as well.

@param files array of NUL-terminated strings allocated with malloc/strdup
@param n number of entries in the array
```

#### main


```text
Program entrypoint for the net logger.

Parses command-line options, enumerates input CSV/JSON files and streams
their rows over UDP to the configured server. Timing and repeat behaviour
are configurable via flags.

@param argc argument count
@param argv argument vector
@return 0 on success, non-zero on error
```